<% jekyll = @components[:jekyll] %>

server {
  server_name <%= jekyll.public_host %>;
  root /home/jekyll/site/;
  expires 1d;
  access_log /var/log/nginx/jekyll-access.log;
  error_log /var/log/nginx/jekyll-error.log;
}

<% if jekyll.ssl_enabled? %>
server {
  listen 443;
  server_name <%= jekyll.public_host %>;
  root /home/jekyll/site/;
  expires 1d;
  access_log /var/log/nginx/jekyll-access.log;
  error_log /var/log/nginx/jekyll-error.log;

  ssl on;
  ssl_certificate /etc/nginx/ssl/<%= jekyll.ssl_domain %>/server.crt;
  ssl_certificate_key /etc/nginx/ssl/<%= jekyll.ssl_domain %>/server.key;
}
<% end %>